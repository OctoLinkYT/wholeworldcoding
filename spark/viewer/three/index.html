<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>02 - TARDY</title>
    <style>
        @font-face {
            font-family: "VCR OSD Mono";
            src: url("https://static.tumblr.com/nlxfn1e/7Pwqv8mt8/vcr_osd_mono_1.001.ttf") format("truetype");
        }

        body {
            margin: 0;
            padding: 0;
            font-family: "VCR OSD Mono";
            color: #ffffff;
            background-color: #000000;
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            text-align: center; 
        }

        .container {
            max-width: 800px;
            padding: 20px;
        }

        #phrase-container {
            margin-top: 50px;
        }

        input {
            font-family: "VCR OSD Mono";
            color: #ffffff;
            background-color: #000000;
            border: none;
            text-align: center;
            font-size: 24px;
            padding: 10px;
        }

a {
    color: #FF6B6B; /* Light red color */
    text-decoration: none; /* Remove underline */
}
        
a:hover {
    text-decoration: underline; /* Underline on hover */
}

    </style>
</head>
<body>
    <div class="container">
        <h1>PUZZLE 02 - TARDY</h1>
        <p id="bruh"> TICKS REMAIN.<br> SUBTRACT THE LOST MAN'S AGE. <br> COMBINE THE DIGITS AND DIVIDE WHAT REMAINS. <br> <br> <br> THE ANSWER GIVES YOU MY NAME.</p>
        <p id="lmao"> <input type="text" id="textInput" name="textInput" placeholder="" onkeypress="return enterKeyPressed(event)" required> </p>
 
    </div>


    <script>
        
document.getElementById("textInput").focus();
        
   function enterKeyPressed(event) {
      if (event.keyCode == 13) {
         if (document.getElementById('textInput').value == "4") {
             var textBox = document.getElementById("textInput");
             let correctAnswerGuessed = true;
             textBox.style.color = "lightgreen";
             textBox.value = "SUCCESS";
             document.getElementById("textInput").blur();
             stop();
             setTimeout(() => {
                textBox.value = "";
                textBox.style.color = "lightblue";
                window.open("https://wholeworldcoding.com/spark");
                close();
             }, 1000);
         }
         return true;
      } else {
         document.getElementById("textInput").focus();
      }
   }
        
let stopLoop = false;

function startLoop() {
    stopLoop = false;
    infiniteLoop();
}

function stop() {
    stopLoop = true;
    document.getElementById("textInput").blur();
    setTimeout(noMoreBox, 3);
}

function infiniteLoop() {
    if (stopLoop) {
        console.log("Loop stopped.");
        return;
    }
    document.getElementById("textInput").focus();
    setTimeout(infiniteLoop, 5);
}

startLoop();

function noMoreBox() {
    document.getElementById("textInput").blur();
}

let correctAnswerGuessed = false; 

function myAction() {
    if (!correctAnswerGuessed) { // Check if the correct answer is not guessed
        stop();
        document.getElementById("textInput").blur();
        let currentNumber = localStorage.getItem('storedNumber') || 0;
        currentNumber++;
        localStorage.setItem('storedNumber', currentNumber);
                document.getElementById('bruh').innerHTML = "<a href='https://wholeworldcoding.com/spark/viewer/two' style='color: lightred;'> Failure. Click to retry. (" + currentNumber + "/5) </a>";
        
        document.getElementById("lmao").innerHTML = "";
    }
}

if (localStorage.getItem('storedNumber') == 5) {
    let correctAnswerGuessed = true;
    stop();
    document.getElementById("lmao").innerHTML = "";
    document.getElementById('bruh').innerHTML = "<p style='color: lightred;'> <h3 style='color: lightred;'>THERE ARE NO MORE CHANCES.</h3></p>";
}
setTimeout(myAction, 10000);        

</script>
</body>
</html>
